(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{2366:function(t,e){for(var a=[],s=0;s<256;++s)a[s]=(s+256).toString(16).substr(1);function i(t,e){var s=e||0,i=a;return[i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]]].join("")}t.exports=i},a55b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layui-container fly-marginTop"},[a("div",{staticClass:"fly-panel fly-panel-user",attrs:{pad20:""}},[a("div",{staticClass:"layui-tab layui-tab-brief",attrs:{"lay-filter":"user"}},[a("ul",{staticClass:"layui-tab-title"},[a("li",{staticClass:"layui-this"},[t._v("登入")]),a("li",[a("router-link",{attrs:{to:{name:"reg"}}},[t._v("注册")])],1)]),a("div",{staticClass:"layui-form layui-tab-content",staticStyle:{padding:"20px 0"},attrs:{id:"LAY_ucm"}},[a("validation-observer",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.validate;return[a("div",{staticClass:"layui-tab-item layui-show"},[a("div",{staticClass:"layui-form layui-form-pane"},[a("form",{attrs:{method:"post"}},[a("div",{staticClass:"layui-form-item"},[a("label",{staticClass:"layui-form-label",attrs:{for:"L_email"}},[t._v("用户名")]),a("validation-provider",{attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("div",{staticClass:"layui-input-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"layui-input",attrs:{type:"text",name:"username",placeholder:"请输入用户名",autocomplete:"off"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),a("div",{staticClass:"layui-form-mid"},[a("span",{staticStyle:{color:"#c00"}},[t._v(t._s(s[0]))])])]}}],null,!0)})],1),a("div",{staticClass:"layui-form-item"},[a("label",{staticClass:"layui-form-label",attrs:{for:"L_pass"}},[t._v("密码")]),a("validation-provider",{attrs:{name:"password",rules:"required|min:6"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("div",{staticClass:"layui-input-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"layui-input",attrs:{type:"password",name:"password",placeholder:"请输入密码",autocomplete:"off"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("div",{staticClass:"layui-form-mid"},[a("span",{staticStyle:{color:"#c00"}},[t._v(t._s(s[0]))])])]}}],null,!0)})],1),a("div",{staticClass:"layui-form-item"},[a("validation-provider",{ref:"codefield",attrs:{name:"code",rules:"required|length:4"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("div",{staticClass:"layui-row"},[a("label",{staticClass:"layui-form-label",attrs:{for:"L_vercode"}},[t._v("验证码")]),a("div",{staticClass:"layui-input-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"layui-input",attrs:{type:"text",name:"code",placeholder:"请输入验证码",autocomplete:"off"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),a("div",{},[a("span",{staticClass:"svg",staticStyle:{color:"#c00"},domProps:{innerHTML:t._s(t.svg)},on:{click:function(e){return t._getCode()}}})])]),a("div",{staticClass:"layui-form-mid"},[a("span",{staticStyle:{color:"#c00"}},[t._v(t._s(s[0]))])])]}}],null,!0)})],1),a("div",{staticClass:"layui-form-item"},[a("button",{staticClass:"layui-btn",attrs:{type:"button"},on:{click:function(e){s().then(t.submit)}}},[t._v("立即登录")]),a("span",{staticStyle:{"padding-left":"20px"}},[a("router-link",{attrs:{to:{name:"forget"}}},[t._v("忘记密码？")])],1)]),a("div",{staticClass:"layui-form-item fly-form-app"},[a("span",[t._v("或者使用社交账号登入")]),a("a",{staticClass:"iconfont icon-qq",attrs:{href:"",onclick:"layer.msg('正在通过QQ登入', {icon:16, shade: 0.1, time:0})",title:"QQ登入"}}),a("a",{staticClass:"iconfont icon-weibo",attrs:{href:"",onclick:"layer.msg('正在通过微博登入', {icon:16, shade: 0.1, time:0})",title:"微博登入"}})])])])])]}}])})],1)])])])},i=[],r=a("6b47"),o=a.n(r),n=(a("96cf"),a("89ba")),l=a("7bb1"),c=a("7ded"),u=a("c64e"),d=a.n(u),f={name:"login",components:{ValidationProvider:l["b"],ValidationObserver:l["a"]},data:function(){return{username:"",password:"",code:"",svg:""}},mounted:function(){var t="";localStorage.getItem("sid")?t=localStorage.getItem("sid"):(t=d()(),localStorage.setItem("sid",t)),this.$store.commit("setSid",t),this._getCode()},methods:{_getCode:function(){var t=this,e=this.$store.state.sid;Object(c["b"])(e).then((function(e){200===e.code&&(t.svg=e.data)}))},submit:function(){var t=Object(n["a"])(o.a.mark((function t(){var e,a=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.observer.validate();case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt("return");case 5:Object(c["c"])({username:this.username,password:this.password,code:this.code,sid:this.$store.state.sid}).then((function(t){200===t.code?(a.username="",a.password="",a.code="",requestAnimationFrame((function(){a.$refs.observer.reset()}))):401===t.code&&a.$refs.codefield.setErrors([t.msg])})).catch((function(t){var e=t.response.data;500===e.code?a.$alert("用户名密码校验失败，请检查！"):a.$alert("服务器错误")}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},m=f,p=(a("dcad"),a("2877")),v=Object(p["a"])(m,s,i,!1,null,"c7a33e3a",null);e["default"]=v.exports},c64e:function(t,e,a){var s=a("e1f4"),i=a("2366");function r(t,e,a){var r=e&&a||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var n=0;n<16;++n)e[r+n]=o[n];return e||i(o)}t.exports=r},dcad:function(t,e,a){"use strict";var s=a("e4a3"),i=a.n(s);i.a},e1f4:function(t,e){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var s=new Uint8Array(16);t.exports=function(){return a(s),s}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},e4a3:function(t,e,a){}}]);
//# sourceMappingURL=login.a8e65cf9.js.map